<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/my-note/blog/rss.xml" title="YumeMemooo's Note Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/my-note/blog/atom.xml" title="YumeMemooo's Note Blog Atom Feed"><title data-react-helmet="true">Gorountine | YumeMemooo&#x27;s Note</title><meta data-react-helmet="true" property="og:url" content="https://yumememooo.github.io/my-note/docs/backend/golang/go_"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Gorountine | YumeMemooo&#x27;s Note"><meta data-react-helmet="true" name="description" content="一種golang的協程？"><meta data-react-helmet="true" property="og:description" content="一種golang的協程？"><link data-react-helmet="true" rel="shortcut icon" href="/my-note/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://yumememooo.github.io/my-note/docs/backend/golang/go_"><link data-react-helmet="true" rel="alternate" href="https://yumememooo.github.io/my-note/docs/backend/golang/go_" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://yumememooo.github.io/my-note/docs/backend/golang/go_" hreflang="x-default"><link rel="stylesheet" href="/my-note/assets/css/styles.fa7cf619.css">
<link rel="preload" href="/my-note/assets/js/runtime~main.5f748c5f.js" as="script">
<link rel="preload" href="/my-note/assets/js/main.94a33e9f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" style="background-color:#82e675;color:#050505" role="banner"><div class="announcementBarContent_3EUC">☞這裡是暫存的隨筆草稿區，另有建立整理後的文章可以進入☆主網站 <a target="_blank" rel="noopener noreferrer" href="https://yumememooo.github.io/" ☆> yumememooo</a>☆</div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/my-note/"><img src="/my-note/img/logo.svg" alt="My Note Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/my-note/img/logo.svg" alt="My Note Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">YumeMemooo&#x27;s Note</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/my-note/docs/intro">All Notes</a><a class="navbar__item navbar__link" href="/my-note/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/yumememooo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">My Github</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link">Community</a><ul class="dropdown__menu"><li><a href="https://yumememooo.github.io/about/" target="_blank" rel="noopener noreferrer" class="dropdown__link">About Me</a></li><li><a href="https://github.com/yumememooo" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub</a></li></ul></div><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/my-note/"><img src="/my-note/img/logo.svg" alt="My Note Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/my-note/img/logo.svg" alt="My Note Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">YumeMemooo&#x27;s Note</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/my-note/docs/intro">All Notes</a></li><li class="menu__list-item"><a class="menu__link" href="/my-note/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/yumememooo" target="_blank" rel="noopener noreferrer" class="menu__link">My Github</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Community</a><ul class="menu__list"><li class="menu__list-item"><a href="https://yumememooo.github.io/about/" target="_blank" rel="noopener noreferrer" class="menu__link">About Me</a></li><li class="menu__list-item"><a href="https://github.com/yumememooo" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/my-note/docs/intro">關於 YumeMemooo&#x27;s Note</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Docusaurus</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/docusaurus/intro">Tutorial Intro</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Tutorial - Basics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/docusaurus/tutorial-basics/create-a-page">Create a Page</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/docusaurus/tutorial-basics/create-a-document">Create a Document</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/docusaurus/tutorial-basics/create-a-blog-post">Create a Blog Post</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/docusaurus/tutorial-basics/markdown-features">Markdown Features</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/docusaurus/tutorial-basics/deploy-your-site">Deploy your site</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/docusaurus/tutorial-basics/congratulations">Congratulations!</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Tutorial - Extras</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/docusaurus/tutorial-extras/manage-docs-versions">Manage Docs Versions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/docusaurus/tutorial-extras/translate-your-site">Translate your site</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">frontend</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">desing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/frontend/design/design_pixel">像素與解析度</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">all</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/frontend/all/http-cors">[web] 跨域請求 CORS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/frontend/all/react-hook-learn">網路文章 react hook系列文學習筆記</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">best_pratice</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/frontend/best_pratice/google">Google I/O 2021 </a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/frontend/best_pratice/html_a_ref">[安全性]為什麼超連結要使用noreferrer noopener</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/frontend/best_pratice/js">JS更好的寫法</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">backend</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">golang</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/my-note/docs/backend/golang/go_Continuous Profiling">[go] Continuous Profiling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/my-note/docs/backend/golang/go_map">GOLANG的MAP的併發問題</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/my-note/docs/backend/golang/go_struct copy">[go] switch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/my-note/docs/backend/golang/go_struct">[go] struct</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/my-note/docs/backend/golang/go_trace">[go] trace</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/my-note/docs/backend/golang/go_ why">go_ why</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/my-note/docs/backend/golang/go_">Gorountine</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">others</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/backend/others/linux_command">[command]linux 歷史紀錄</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/backend/others/number_bit">位元與數字</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/backend/others/startedTime">程式的啟動速度</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">tool</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/tool/git">[node]npx</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/tool/node">[git] 上傳程式碼操作</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/tool/open_ material">[material] 網路上素材與線上工具</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/my-note/docs/tool/mac">mac</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Gorountine</h1></header><div class="markdown"><p>一種golang的協程？</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="多執行緒"></a>多執行緒<a class="hash-link" href="#多執行緒" title="Direct link to heading">#</a></h2><ul><li>淺談多核CPU、多執行緒與平行計算](<a href="https://www.itread01.com/content/1549608874.html" target="_blank" rel="noopener noreferrer">https://www.itread01.com/content/1549608874.html</a><ul><li>多執行緒的作用不只是用作平行計算</li><li>阻塞在什麼時候發生呢？一般是等待IO操作（磁碟，資料庫，網路等等）。</li><li>在單核時代，多執行緒的這個消除阻塞的作用還可以叫做“併發”，這和並行是有著本質的不同的。併發是“偽並行”，看似並行，而實際上還是一個CPU在執行一切事物，只是切換的太快，我們沒法察覺罷了。</li><li>四種場景？？不懂</li></ul></li><li><a href="https://www.itread01.com/content/1544961004.html" target="_blank" rel="noopener noreferrer">對於多執行緒程式，單核cpu與多核cpu是怎麼工作的</a><ul><li>多執行緒在單cpu中其實也是順序執行的，，不過系統可以幫你切換那個執行而已，效率不會有提高的≤切換執行緒反倒會增加開銷</li><li><code>多執行緒的用處在於，做某個耗時的操作時，需要等待返回結果，這時用多執行緒可以提高程式併發程度</code>。如果一個不需要任何等待並且順序執行能夠完成的任務，用多執行緒簡直是浪費。</li><li>什麼時候該使用多執行緒呢？這要分四種情況討論：？？不懂</li></ul></li><li><a href="https://medium.com/erens-tech-book/%E7%90%86%E8%A7%A3-process-thread-94a40721b492" target="_blank" rel="noopener noreferrer">【恐龍】理解 Process &amp; Thread</a><ul><li>併發不一定要在同一時刻？並發未必平行</li></ul></li><li><a href="https://www.gushiciku.cn/pl/pcJA/zh-tw" target="_blank" rel="noopener noreferrer">15分鐘讀懂程序執行緒、同步非同步、阻塞非阻塞、併發並行，太實用了！</a><ul><li>多執行緒：火車站開n個視窗</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="併發與平行"></a>併發與平行<a class="hash-link" href="#併發與平行" title="Direct link to heading">#</a></h2><ul><li><a href="https://ithelp.ithome.com.tw/articles/10242047" target="_blank" rel="noopener noreferrer">ＩＴ邦 程序(進程)、執行緒(線程)、協程，傻傻分得清楚！</a><img src="https://miro.medium.com/max/1108/1*7GZrAWoGc_nZtuvHIJ9w-w.jpeg"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">- Parallel 並行是利用多個 CPU 達到同時並行處理任務的需求（也就是同一個時間點有許多任務在同時執行）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- Concurrent 則是許多任務在爭搶同一個 CPU 的資源，因此一個時間點只會有一個任務正在執行，只是因為切換非常快，使用者通常不會感覺到任務實際上一直在切換。 (單核是，但多核怪怪的 併發不一定要在同一時刻？並發未必平行)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><a href="https://hsinyu.gitbooks.io/golang_note/content/goroutine.html" target="_blank" rel="noopener noreferrer">concurrency (併發) vs parallelism (並行)</a>覺得這篇怪怪的</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="線程與協程"></a>線程與協程<a class="hash-link" href="#線程與協程" title="Direct link to heading">#</a></h2><ul><li><p><a href="https://ithelp.ithome.com.tw/articles/10242047" target="_blank" rel="noopener noreferrer">ＩＴ邦 程序(進程)、執行緒(線程)、協程，傻傻分得清楚！</a></p><ul><li>MultiProcessing 多進程 &amp; MultiThreading 多線程</li></ul></li><li><p><a href="https://ithelp.ithome.com.tw/articles/10239629" target="_blank" rel="noopener noreferrer">Day 18 | Kotlin 中處理異步的好伙伴 - Coroutine</a></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">- 程式（Application ）&gt;進程（ Process ）&gt;線程/執行緒（ Thread ) &gt;協程（ Coroutine ） </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- Process 之間是不能直接溝通的（如果可以任意呼叫到其他應用程式裏面的內容，那也有點太可怕了）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- Thread 共享資源</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- 協程（ Coroutine ） ： Coroutine 一次只會執行一個 Job ，會透過頻繁切換 Job 達到類似異步的效果，需要的資源比開新的 Thread 少</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><img src="https://i.imgur.com/EHAl2rq.png" alt="Application vs. Process vs. Thread vs. Coroutine"></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">- .....</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p><a href="https://ithelp.ithome.com.tw/articles/10219673" target="_blank" rel="noopener noreferrer">30-08 之應用層的 I/O 優化 ( 維護性 ) - 協程 Coroutine</a></p><ul><li>coroutine 協程:在應用層實現同步非阻塞的 I/O 操作</li><li>異步非阻塞寫法:callback hell-&gt;同步非阻塞寫法(在 nodejs 中的 async/await 就是協程)</li><li>coroutine 協程實現原理:應用端內部會『 自行 』的決定誰先執行</li><li>關於 Coroutine 的幾個問題:coroutine是性能的減項,此應用已是一個異步非阻塞的應用，當你搭配 coroutine 下去，會減少不少的維護成本，因為寫法就和一般程式寫法一樣。</li><li><code>Golang 的 Goroutine?-&gt; 是coroutine嗎？</code>一半算，goroutine 有實現 corotuine 想完成的『同步』這個事情，但同時間它又針對 cpu 運算這方面在實現上增加不少改善</li><li>Golang 的運行架構:Sched+MPG 模型,goroutine 在運行時阻塞了會自動的分配到閒的 thread</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="非阻塞-io-模型-reactor"></a>非阻塞 I/O 模型 Reactor<a class="hash-link" href="#非阻塞-io-模型-reactor" title="Direct link to heading">#</a></h3><ul><li><a href="https://ithelp.ithome.com.tw/articles/10219203" target="_blank" rel="noopener noreferrer">30-07 之應用層的 I/O 優化 - 非阻塞 I/O 模型 Reactor</a>
當系統 I/O 操作繁重時，請使用 refactor 模式的支援語言或是框架。
當系統 CPU 運算繁重時，則使用 multi process 的模式。</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="goroutine-是coroutine嗎？"></a>Goroutine 是coroutine嗎？<a class="hash-link" href="#goroutine-是coroutine嗎？" title="Direct link to heading">#</a></h3><ul><li>上面說一半算</li><li><a href="http://c.biancheng.net/view/96.html" target="_blank" rel="noopener noreferrer">goroutine和coroutine的区别</a><ul><li><code>goroutine 可能发生并行执行</code>；但 coroutine 始终顺序执行。</li><li>goroutines 通过通道来通信；coroutines 通过让出和恢复操作来通信 (goroutine 间使用 channel 通信，coroutine 使用 yield 和 resume 操作。)</li><li>goroutines 比 coroutines 更强大</li><li>goroutine 可能发生在多线程环境下，goroutine 无法控制自己获取高优先度支持；coroutine 始终发生在单线程，coroutine 程序需要主动交出控制权，宿主才能获得控制权并将控制权交给其他 coroutine。</li><li>coroutine 的运行机制属于协作式任务处理，如果开发者无意间或者故意让应用程序长时间占用 CPU，操作系统也无能为力</li><li>goroutine 属于抢占式任务处理，已经和现有的多线程和多进程任务处理非常类似。应用程序对 CPU 的控制最终还需要由操作系统来管理，操作系统如果发现一个应用程序长时间大量地占用 CPU，那么用户有权终止这个任务。</li></ul></li><li><a href="https://stackoverflow.com/questions/18058164/is-a-go-goroutine-a-coroutine" target="_blank" rel="noopener noreferrer">Go goroutine 是協程嗎？stackoverflow</a></li><li><a href="https://www.huaweicloud.com/articles/949bec4beeb84dfcaea30513b3d497c8.html" target="_blank" rel="noopener noreferrer">python协程与golang协程精讲</a><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">- Python的协程源于yield指令</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- Go实现了两种并发形式:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - 多线程共享内存。如Java或者C++等在多线程中共享数据（例如数组、Map、或者某个结构体或对象）的时候，通过锁来访问.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - Go语言特有的，也是Go语言推荐的：CSP（communicating sequential processes）并发模型。Go的CSP并发模型实现M, P, G : </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- go的协程本质上还是系统的线程调用，而Python中的协程是eventloop模型实现，所以虽然都叫协程,Python 中的协程是严格的 1:N 关系一个线程对应了多个协程。虽然可以实现异步I/O，但是不能有效利用多核</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- 而 Go 中是 M:N 的关系也就是 N 个协程会映射分配到 M 个线程上多个线程能分配到不同核心上,CPU 密集的应用使用 goroutine 也会获得加速.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div>即使有少量阻塞的操作，也只会阻塞某个 worker 线程，而不会把整个程序阻塞<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">- goroutine 中不需要显式使用 await 交出控制权，但是 Go 也不会严格按照时间片去调度 goroutine，而是会在可能阻塞的地方插入调度。goroutine 的调度可以看做是半抢占式的。</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="所以？？"></a>所以？？<a class="hash-link" href="#所以？？" title="Direct link to heading">#</a></h3><ul><li><a href="https://codychen.me/2019/12/%E5%A4%9A%E9%80%B2%E7%A8%8B/%E5%A4%9A%E5%9F%B7%E8%A1%8C%E7%B7%92-%E4%B8%A6%E7%99%BC/%E5%B9%B3%E8%A1%8C/" target="_blank" rel="noopener noreferrer">多進程/多執行緒！ 並發/平行？</a> 看完更不懂了</li></ul><p>Ｑ多核多執行緒是否就是平行處理？
Ｑ：多核下的併發是否可以是一些平行處理一些併發處理？？</p><ul><li><a href="https://www.gushiciku.cn/pl/2P2w/zh-tw" target="_blank" rel="noopener noreferrer">Go FAQ 問題</a></li></ul><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="影1-线程和协程的区别"></a>影1 线程和协程的区别<a class="hash-link" href="#影1-线程和协程的区别" title="Direct link to heading">#</a></h3><p>1.（影）为什么golang能够脱颖而出？线程和协程的区别是什么？</p><p>1.1 線程是跟硬件相關的 會消耗佔用ＣＰＵ 內存等等
線程是軟件的概念 像是函數 method？ 類似是消息的隊列</p><p>1.2 創建goruntine的開銷是比較小的 速度也快很多
可以創建一百萬兩百萬的協程沒有問題
但就做不到創建一百萬兩百萬個線程了 慢且ＣＰＵ沒有這麼多core，內存被消耗得很厲害</p><p>1.3 線程都有一個唯一的ＩＤ來標示，“Goroutine沒有？”</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="延伸閱讀：為什麼沒有goroutine-id"></a>延伸閱讀：為什麼沒有Goroutine ID<a class="hash-link" href="#延伸閱讀：為什麼沒有goroutine-id" title="Direct link to heading">#</a></h5><ul><li><a href="https://www.gushiciku.cn/pl/gYQQ/zh-hk" target="_blank" rel="noopener noreferrer">Go 羣友提問：進程、線程都有 ID，為什麼 Goroutine 沒有 ID？</a></li><li>在常規的進程、線程中都有其 ID 的概念，我們可以在程序中通過 ID 來獲取其他進程、線程中的數據，甚至是傳輸數據。就像一把鑰匙一樣，有了他幹啥都可以。</li><li>Go 語言在以前是有暴露方法去獲取 GoroutineID 的，但在 Go1.4 後就把該方法給隱藏起來了，不建議大家使用。假設可以通過 GoroutineID 進行跨協程操縱，那麼就有可能出現我的 Goroutine，不一定是由 “我” 自己決定的。可能其他正在處理的 GoroutineB 悄悄摸摸的改了我這個 GoroutineA 的行為。
這就有可能導致一個災難問題</li><li>其實還是可以寫程式去拿到Goroutine ID的，而去排查 Go 工程中的問題，例如：錯誤堆棧信息、PProf 性能分析等調試信息也可以看到。</li></ul><p>1.4 通信方式
線程適用全局變量還要加鎖保證數據沒有,,,
協程使用channel</p><hr><p>看起來同步的方式去寫出異步 非阻塞式掛起
併發 多線程</p><hr><p><code>不太懂</code></p><p><a href="https://www.youtube.com/watch?v=uJXSMMyvAgM" target="_blank" rel="noopener noreferrer">沈崴 - 为什么协程是真并行而线程不是</a>
攜程也是可以多核
協程可以控制上下文 把邏輯切換點作為調度點?
協程是真並行?</p><hr><p><a href="https://www.cnblogs.com/sparkdev/p/10930168.html" target="_blank" rel="noopener noreferrer">Golang 入门 : goroutine(协程)</a></p><ul><li>要在一个协程中运行函数，直接在调用函数时添加关键字 go 就可以了</li><li>协程也叫轻量级的线程，与传统的进程和线程相比，协程的最大特点是 &quot;轻&quot;！可以轻松创建上百万个协程而不会导致系统资源衰竭。</li><li>多数编程语言在语法层面并不直接支持协程，而是通过库的方式支持。但是用库的方式支持的功能往往不是很完整，比如仅仅提供轻量级线程的创建、销毁和切换等能力。如果在这样的协程中调用一个同步 IO 操作，比如网络通信、本地文件读写，都会阻塞其他的并发执行的协程，从而无法达到轻量级线程本身期望达到的目标。</li><li>Golang 在语言级别支持协程，称之为 goroutine。Golang 标准库提供的所有系统调用操作(包括所有的同步 IO 操作)，都会出让 CPU 给其他 goroutine。这让 goroutine 的切换管理不依赖于系统的线程和进程，也不依赖于 CPU 的核心数量，而是交给 Golang 的运行时统一调度。</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="關鍵：入門．"></a>關鍵：入門．<a class="hash-link" href="#關鍵：入門．" title="Direct link to heading">#</a></h2><p>IT邦幫忙教學文
<a href="https://ithelp.ithome.com.tw/articles/10240892" target="_blank" rel="noopener noreferrer"># Day14 Go併發症狀- Goroutines (go)</a></p><ul><li>併發(Concurrency)是共享時間運算，在一段時間內輪流享有時間資源 ，是把時間切成很小很小段，在這小段的時間裡先後執行多項任務。一個人在一段時間內做兩件事</li><li>併行(Parallelism)是平行運算，一直都能享有時間資源,是CPU有多個核心，可以同時處理多個任務。,兩個人同時在做事</li><li>入門使用及限制一個ＣＰＵ核心時</li></ul><p><a href="https://ithelp.ithome.com.tw/articles/10242047" target="_blank" rel="noopener noreferrer">https://ithelp.ithome.com.tw/articles/10242047</a></p><p><a href="https://www.readfog.com/a/1634446830986170368" target="_blank" rel="noopener noreferrer">https://www.readfog.com/a/1634446830986170368</a></p><p><a href="https://segmentfault.com/a/1190000018719287" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000018719287</a></p><p><a href="https://ithelp.ithome.com.tw/articles/10218483" target="_blank" rel="noopener noreferrer">https://ithelp.ithome.com.tw/articles/10218483</a></p><p><a href="https://electronic.blue/blog/2012/06/11-coroutine-an-introduction/" target="_blank" rel="noopener noreferrer">https://electronic.blue/blog/2012/06/11-coroutine-an-introduction/</a></p><p><a href="https://s.weibo.com/weibo/%25E5%258D%2594%25E7%25A8%258B?topnav=1&amp;wvr=6&amp;b=1" target="_blank" rel="noopener noreferrer">https://s.weibo.com/weibo/%25E5%258D%2594%25E7%25A8%258B?topnav=1&amp;wvr=6&amp;b=1</a></p><p><a href="https://mp.weixin.qq.com/s/6sN2hdxCNWiDfizWdzS2yA" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/6sN2hdxCNWiDfizWdzS2yA</a></p><p><a href="https://www.cnblogs.com/sparkdev/p/10930168.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/sparkdev/p/10930168.html</a></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/yumememooo/my-note/edit/master/docs/backend/golang/go_.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/my-note/docs/backend/golang/go_ why"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« go_ why</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/my-note/docs/backend/others/linux_command"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">[command]linux 歷史紀錄 »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#多執行緒" class="table-of-contents__link">多執行緒</a></li><li><a href="#併發與平行" class="table-of-contents__link">併發與平行</a></li><li><a href="#線程與協程" class="table-of-contents__link">線程與協程</a><ul><li><a href="#非阻塞-io-模型-reactor" class="table-of-contents__link">非阻塞 I/O 模型 Reactor</a></li><li><a href="#goroutine-是coroutine嗎？" class="table-of-contents__link">Goroutine 是coroutine嗎？</a></li><li><a href="#所以？？" class="table-of-contents__link">所以？？</a></li><li><a href="#影1-线程和协程的区别" class="table-of-contents__link">影1 线程和协程的区别</a></li></ul></li><li><a href="#關鍵：入門．" class="table-of-contents__link">關鍵：入門．</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/my-note/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/my-note/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/yumememooo" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 YumeMemooo, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/my-note/assets/js/runtime~main.5f748c5f.js"></script>
<script src="/my-note/assets/js/main.94a33e9f.js"></script>
</body>
</html>